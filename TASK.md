# Задача

## Главная цель — улучшить поддерживаемость

Вам предлагается провести рефакторинг кода проекта, аналогичного Excel/Google Spreadsheets: не изменяя функциональности, сделать код более поддерживаемым. В текущей кодовой базе с точки зрения читаемости/гибкости и других характеристик есть недочёты как на уровне типов, так и в рантайм коде. Вы можете как изменить только детали реализации внутри уже определенных функций, так и внести изменения в архитектуру: перераспределить ответственность, улучшить структуру, ввести новые абстракции и т.д. Можно изменять всё, даже интерфейсы! Если вы считаете, что публичный интерфейс модуля неудачен, то можете смело поменять его и переписать соответствующие unit-тесты. Чем глобальнее изменения, тем сильнее вызов для вас, и тем нам интереснее будет обсудить ваши идеи на дальнейшем собеседовании.

Проект содержит только ядро клиентского приложения: типы, функции и константы, которые описывают бизнес-логику и все правила бизнес-логики. В рамках челленджа будем считать, что остальную часть приложения (вёрстку, общение с бекендом и тд) будут делать другие участники команды. Весь код в ядре имеет критическую важность для приложения, так как тут сосредоточена основная сложность системы, при этом код полностью чистый, то есть отсутствуют какие-либо сайд-эффекты, значит проект легко может быть покрыт тестами, что уже отчасти и сделано.

## Главный критерий — поддерживаемость

Для нас одним из важнейших отличий между джуниорами и миддл-разработчиками являются умения и знания проектирования, понимания не только того, как "накодить, чтобы работало", но и как это сделать грамотно, чтобы решение могли поддерживать другие участники команды. Так как поддерживаемость включает в себя множество других критериев, такие как читаемость, гибкость, консистентность API и так далее, то мы решили сделать это главным показателем во всём задании. Это также значит, что можно в разумных рамках пренебрегать другими критериями, например, производительностью, когда оптимизации начинают бить по читаемости. Именно в бизнес-логике чаще всего концентрируется сложность, которую надо держать под контролем, и именно рефаткоринг поможет за кратчайшее время проявить эти навыки.

## Время не ограничено, но мы старались сделать задание не слишком объемным

Хотя мы никак не ограничиваем время на выполнение, мы бы не хотели грузить вас излишним объемом работы. Мы старались задание сделать таким, чтобы за наименее возможный промежуток времени (ориентировочно 3 часа) вы могли продемонстрировать ваши умения разобраться с существующим кодом и навыки проектирования/написания чистого кода.

## Предметная область: онлайн-таблицы

В репозитории представлен код проекта, который является аналогом Excel/Google Spreadsheet. У пользователя должна быть возможность создавать новые таблицы, добавлять туда колонки и строки, заполнять ячейки константами разных типов (числа, строки, даты) или функциями, удалять строки и столбцы.

Предметная область выбрана такой, чтобы фронтенд-приложение было достаточно сложным для демонстрации навыков проектирования, и при этом чтобы она была интуитивно понятна большинству разработчиков. Для понимания задачи и текущего кода бизнес-логики достаточно иметь поверхностный опыт работы с Excel или Google Spreadsheets на уровне добавления колонки или создания формул суммирования.

## Реализованные в проекте сценарии

- Создать новую таблицу со всеми ячейками неустановленного типа и без какого-либо значения;
- Установить константное строковое/числовое/датированное значение в ячейку;
- Установить значение с функцией над числами в какую-либо ячейку;
- Установить значение с датой и временем, либо просто датой, либо просто временем в какую-либо ячейку;
- Вывести ошибку в случае некорректной формулы или проблем с исполнением формул;
- Очистить ячейку;
- Удалить колонку;
- Удалить строку.

По умолчанию любое поведение считать аналогичным тому, как это работает в Google Spreadsheets. Например, в одной колонке могут быть ячейки разных типов, а в строке могут быть заполнены не все колонки.

## Упрощения

В текущей версии не реализован механизм определения циклических зависимостей между формулами (когда, например, формула в ячейке A1 зависит от формулы в A2, которая зависит от A1), для простоты этим требованием можно пренебречь.

## Тесты уже написаны, но они неидеальны

Так как в проекте для упрощения нет слоя представления (UI), и нет слоя работы с внешним API, а есть только чистое ядро с бизнес-логикой, то главным способом получения фидбека и подтверждения работоспособности являются тесты. Мы заранее написали некоторые тесты, которые описывают требования к функциональности и которые помогут вам проверить, что вы не сломали лишнего, однако не все случаи были покрыты. К тому же, тесты намеренно написаны с некоторыми "ляпами", так что на ваше усмотрение и по вашему желанию, рефакторинг можно распространить и на них.

## Функциональный стиль

Сейчас код написан в функциональном стиле, все функции по-максимуму иммутабельны — потенциально это хороший подход для внешнего кода, который тоже написан в функциональном стиле и, возможно, использует реактивное программирование вроде `RxJS`. Требования сохранить функциональный стиль нет, значит, что можно переписать в ООП-парадигме, либо выбрать любой другой подход, единственное ограничение — ваши умения и ваше время на переписывание :)

## Внешние зависимости разрешены

Внешние зависимости не ограничены: вы можете подключать библиотеки на своё усмотрение.
